# Тайный Санта

Это сервис для организации "Тайного Санты", написанный на **Go** и **ванильных HTML, CSS и JS**

## Backend

### Ручки API

#### Auth

<details>
<summary>POST /register - Регистрация пользователя</summary>

**Описание:** выполняет регистрацию

**Тело запроса:**

```json
{
  "name": "string",
  "username": "string",
  "password": "string"
}
```

</details>

<details>
<summary>POST /login - Вход в аккаунт</summary>

**Описание:** выполняет вход (выдает токен аутентификации пользователя)

**Тело запроса:**

```json
{
  "username": "string",
  "password": "string"
}
```

**Тело ответа:** токен

</details>

<details>
<summary>GET /me - Информация о текущем пользователе</summary>

**Требования:** аутентификация

**Описание:** предоставляет информацию о пользователе, в аккаунт которого выполнен вход

</details>

#### Rooms

<details>
<summary>POST /rooms - Создание комнаты</summary>

**Описание:** создает комнату

**Тело запроса:**

```json
{
  "name": "string",
  "description": "string"
}
```

</details>

<details>
<summary>GET /rooms - Список моих комнат</summary>

**Требования:** аутентификация

**Описание:** выдает список созданных пользователем комнат

**Тело ответа:**

```json
{
  "rooms": [
    {
      "id": 1,
      "name": "Комната 1",
      "description": "Описание",
      "max_participants": 30,
      "created_at": "2024-12-29T10:15:46Z"
    }
  ]
}
```

</details>

<details>
<summary>DELETE /rooms/{id} - Удаление комнаты</summary>

**Требования:** аутентификация; вы должны быть владельцем комнаты

**Описание:** удаляет комнату с id, равным {id}

</details>

#### Participants

<details>
<summary>POST /rooms/{id}/participants - Вход в комнату</summary>

**Требования:** аутентификация; участие в комнате

**Описание:** добавляет пользователя в указанную комнату

</details>

<details>
<summary>DELETE /rooms/{id}/participants/me - Выход из комнаты</summary>

**Требования:** аутентификация; участие в комнате

**Описание:** удаляет пользователя из указанной комнаты

</details>

<details>
<summary>GET /rooms/{id}/wish - Мое желание</summary>

**Требования:** аутентификация; участие в комнате

**Описание:** возвращает желание пользователя в указанной комнате

**Тело ответа:**

```json
{
  "wish": "Желание"
}
```

</details>

<details>
<summary>PATCH /rooms/{id}/wish - Обновление желания</summary>

**Требования:** аутентификация; участие в комнате

**Описание:** обновляет желание пользователя в указанной комнате

**Тело запроса:**

```json
{
  "wish": "Новое желание"
}
```

</details>

<details>
<summary>GET /rooms/{id}/participants - Список участников комнаты</summary>

**Требования:** аутентификация; вы должны быть владельцем комнаты

**Описание:** выдает список участников указанной комнаты

**Тело ответа:**

```json
{
  "participants": [
    {
      "id": 1,
      "user_id": 1,
      "room_id": 1,
      "wish": "Желание",
      "gives_to": 2
    },
    {
      "id": 2,
      "user_id": 2,
      "room_id": 1,
      "wish": "Желание",
      "gives_to": 1
    }
  ]
}
```

</details>

<details>
<summary>POST /rooms/{id}/participants/distribute - Распределить дарящих</summary>

**Требования:** аутентификация; вы должны быть владельцем комнаты

**Описание:** распределяет, кто кому дарит в указанной комнате

</details>
